<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Prueba de CORS</title>
</head>
<body>
    <h1>Prueba de Conexión a Google Script</h1>
    <button id="test-btn">Realizar Prueba</button>
    <p id="status"></p>

    <script>
        document.getElementById('test-btn').addEventListener('click', () => {
            const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbw6rcxWwjQv-OzF4lENu4jyKIdMkJKJLsor54FEUJ5rwPQ4ZvL3va3PAc8onNOfYqE7/exec';
            const statusP = document.getElementById('status');
            statusP.textContent = 'Enviando petición...';

            fetch(SCRIPT_URL, {
                method: 'POST',
                cache: 'no-cache',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ test: 'hola' }) // Enviamos un cuerpo simple
            })
            .then(res => res.json())
            .then(data => {
                console.log('Respuesta del servidor:', data);
                statusP.textContent = '¡Éxito! Respuesta recibida: ' + JSON.stringify(data);
                statusP.style.color = 'green';
            })
            .catch(error => {
                console.error('Error en la petición fetch:', error);
                statusP.textContent = '¡Fallo! Revisa la consola (F12) para ver el error de CORS.';
                statusP.style.color = 'red';
            });
        });
    </script>
</body>
</html>
